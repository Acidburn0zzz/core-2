{% extends '@ZikulaCoreInstaller/theme.html.twig' %}

{% block title 'Zikula Core Installer :: System Requirements Check' %}

{% block content %}
    <div>
        <fieldset>
            <legend>{{ __("PHP") }}</legend>
            <ul class="systemrequirements text-left">
                {% if checks.phpsatisfied %}
                <li><span class="fa fa-fw fa-check text-success"></span> {{ __f("Your PHP version is %s.", checks.phpversion) }}</li>
                {% else %}
                <li><span class="fa fa-fw fa-times text-danger"></span> {{ __f("You have got a problem! Your PHP version is %s, which does not satisfy the Zikula system requirement of version 5.3.3 or later.", checks.phpversion) }}</li>
                {% endif %}

                {# PHP 5.3.0 or greater requires date.timezone to be set in php.ini #}
                {% if checks.datetimezone %}
                <li><span class="fa fa-fw fa-check text-success"></span> {{ __f("php.ini: date.timezone is set to %s", checks.datetimezone) }}</li>
                {% else %}
                <li><span class="fa fa-fw fa-times text-danger"></span> {{ __("date.timezone is currently not set.  It needs to be set to a valid timezone in your php.ini such as timezone like UTC, GMT+5, Europe/Berlin.") }}</li>
                {% endif %}

                {% if checks.register_globals %}
                <li><span class="fa fa-fw fa-check text-success"></span> {{ __("PHP register_globals = Off") }}</li>
                {% else %}
                <li><span class="fa fa-fw fa-times text-danger"></span> {{ __("PHP register_globals = On and must be turned off in php.ini, or .htaccess") }}
                {% endif %}

                {% if checks.magic_quotes_gpc %}
                <li><span class="fa fa-fw fa-check text-success"></span> {{ __("PHP magic_quotes_gpc = Off") }}</li>
                {% else %}
                <li><span class="fa fa-fw fa-times text-danger"></span> {{ __("PHP magic_quotes_gpc = On and must be turned off in php.ini") }}</li>
                {% endif %}

                {% if checks.pdo %}
                <li><span class="fa fa-fw fa-check text-success"></span> {{ __("PDO extension loaded.") }}</li>
                {% else %}
                <li><span class="fa fa-fw fa-times text-danger"></span> {{ __("You PHP installation doesn't have the PDO extension loaded.") }}</li>
                {% endif %}

                {% if checks.phptokens %}
                <li><span class="fa fa-fw fa-check text-success"></span> {{ __("Your PHP installation has the necessary token functions available.") }}</li>
                {% else %}
                <li><span class="fa fa-fw fa-times text-danger"></span> {{ __("You have got a problem! Your PHP installation does not have the token functions available, but they are necessary for Zikula's output system.") }}</li>
                {% endif %}

                {% if checks.mbstring %}
                <li><span class="fa fa-fw fa-check text-success"></span> {{ __("Your PHP installation has the multi-byte string functions available.") }}</li>
                {% else %}
                <li><span class="fa fa-fw fa-times text-danger"></span> {{ __("Your PHP installation does not have the multi-byte string functions available. Zikula needs this to handle multi-byte character sets.") }}</li>
                {% endif %}

                {% if checks.pcreUnicodePropertiesEnabled %}
                <li><span class="fa fa-fw fa-check text-success"></span> {{ __("Your PHP installation's PCRE library has Unicode property support enabled.") }}</li>
                {% else %}
                <li><span class="fa fa-fw fa-times text-danger"></span> {{ __("Your PHP installation's PCRE library does not have Unicode property support enabled. Zikula needs this to handle multi-byte character sets in regular expressions. The PCRE library used with PHP must be compiled with the '--enable-unicode-properties' option.") }}</li>
                {% endif %}

                {% if checks.json_encode %}
                <li><span class="fa fa-fw fa-check text-success"></span> {{ __("Your PHP installation has the JSON functions available.") }}</li>
                {% else %}
                <li><span class="fa fa-fw fa-times text-danger"></span> {{ __("Your PHP installation does not have the JSON functions available. Zikula needs this to handle AJAX requests.") }}</li>
                {% endif %}
            </ul>
        </fieldset>

        <fieldset>
            <legend>{{ __("Personal configuration files") }}</legend>
            <ul class="systemrequirements text-left">
                {% if checks.config_personal_config_php == true %}
                <li><span class="fa fa-fw fa-check text-success"></span> {{ __f("'%s' is not present.  This is OK.", "config/personal_config.php") }}</li>
                {% else %}
                <li><span class="fa fa-fw fa-times text-danger"></span> {{ __f("'%s' has been found. This is not OK: please rename this file before continuing the installation process.", "config/personal_config.php") }}</li>
                {% endif %}
                {#{% if checks.custom_parameters_yml == true %}#}
                {#<li><span class="fa fa-fw fa-check text-success"></span> {{ __f("'%s' is not present.  This is OK.", "app/config/custom_parameters.yml") }}</li>#}
                {#{% else %}#}
                {#<li><span class="fa fa-fw fa-times text-danger"></span> {{ __f("'%s' has been found. This is not OK: please rename this file before continuing the installation process.", "app/config/custom_parameters.yml") }}</li>#}
                {#{% endif %}#}
            </ul>
        </fieldset>

        <fieldset>
            <legend>{{ __("File system permissions") }}</legend>
            <ul class="systemrequirements text-left">
                {% for file in checks.files %}
                {% if file.writable %}
                <li><span class="fa fa-fw fa-check text-success"></span> {{ __f("%s is writeable.", file.filename) }}</li>
                {% else %}
                <li><span class="fa fa-fw fa-times text-danger"></span> {{ __f("You have a problem! '%s' is not writeable. Please ensure that the permissions are set correctly for the installation process.", file.filename) }}</li>
                {% endif %}
                {% endfor %}
            </ul>
        </fieldset>

        <a href="{{ url('install', {'stage': 'requirements'}) }}" class="btn btn-danger btn-lg"><i class="fa fa-fw fa-repeat"></i> {{ __("Check requirements again") }}</a>

    </div>
{% endblock %}